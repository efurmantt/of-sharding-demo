<!doctype html>
Shard 1
<button onclick="void publish()">Send</button>
<input id="test" type="text" value="this is a test">
<div id="messages"></div>
<script>
fin.desktop.main(function() {
  var options = {
    path: '%LocalAppData%\\OpenFin\\OpenFinRVM.exe',
    arguments: '--config="http://localhost:8081/app2.json"',
    listener: console.log.bind(console, 'process listener')
  };
  fin.desktop.System.launchExternalProcess(
    options,
    console.log.bind(console, 'launchExternalProcess'),
    console.error.bind(console, 'launchExternalProcess'));

  fin.desktop.InterApplicationBus.subscribe('*', 'test', function(message) {
    messages.innerHTML += message + '<br/>'
  })
})

function publish() {
  fin.desktop.main(function() {
    fin.desktop.InterApplicationBus.publish('test', test.value)
  })
}
</script>